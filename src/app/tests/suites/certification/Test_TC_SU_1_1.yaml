# SPDX-FileCopyrightText: (c) 2021 Project CHIP Authors
#
# SPDX-License-Identifier: Apache-2.0
# Auto-generated scripts for harness use only, please review before automation. The endpoints and cluster names are currently set to default

name: 3.1.1.  [TC-SU-1.1] Invoke AnnounceOTAProvider from Admin(DUT) to OTA-R

PICS:
    - MCORE.ACL.Administrator

config:
    nodeId: 0x12344321
    cluster: "Basic"
    endpoint: 0

tests:
    - label: "Commission OTA-P/TH2 to DUT/same fabric as in test setup."
      PICS: OTAR.C.M.AnnounceOTAProvider
      verification: |
          ./chip-tool otasoftwareupdaterequestor announce-ota-provider 0xDEADBEEF 0 0 0 0x1234567890 0

          where 0x1234567890 is OTA Requestor node ID and 0xDEADBEEF is OTA Provider node ID

          Verify on the OTA Requestor logs receives AnnounceOTAProvider:

          [1645743053311] [97809:20280821] CHIP: [SWU] OTA Requestor received AnnounceOTAProvider
          [1645743053311] [97809:20280821] CHIP: [SWU]   FabricIndex: 1
          [1645743053311] [97809:20280821] CHIP: [SWU]   ProviderNodeID: 0x0000000000000001
          [1645743053311] [97809:20280821] CHIP: [SWU]   VendorID: 0x0
          [1645743053311] [97809:20280821] CHIP: [SWU]   AnnouncementReason: 0
          [1645743053311] [97809:20280821] CHIP: [SWU]   Endpoint: 0
      disabled: true
