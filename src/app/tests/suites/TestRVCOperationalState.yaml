# SPDX-FileCopyrightText: 2023 Project CHIP Authors
#
# SPDX-License-Identifier: Apache-2.0

name: RVC Operational State Tests

config:
    nodeId: 0x12344321
    cluster: "RVC Operational State"
    endpoint: 1

tests:
    - label: "Wait for the commissioned device to be retrieved"
      cluster: "DelayCommands"
      command: "WaitForCommissionee"
      arguments:
          values:
              - name: "nodeId"
                value: nodeId

    - label: "Read Phase List"
      command: "readAttribute"
      attribute: "PhaseList"
      response:
          value: null

    - label: "Read current Phase"
      command: "readAttribute"
      attribute: "CurrentPhase"
      response:
          value: null

    - label: "Read Countdown Time"
      command: "readAttribute"
      attribute: "CountdownTime"
      response:
          value: null

    - label: "Read Operational State List"
      command: "readAttribute"
      attribute: "OperationalStateList"
      response:
          value:
              [
                  { OperationalStateID: 0 },
                  { OperationalStateID: 1 },
                  { OperationalStateID: 2 },
                  { OperationalStateID: 3 },
                  { OperationalStateID: 64 },
                  { OperationalStateID: 65 },
                  { OperationalStateID: 66 },
              ]

    - label: "Read current Operational Error"
      command: "readAttribute"
      attribute: "OperationalError"
      response:
          value: { ErrorStateID: 0 }

    - label: "Read current Operational State"
      command: "readAttribute"
      attribute: "OperationalState"
      response:
          value: 0

    - label: "Start Command"
      command: "Start"
      response:
          error: UNSUPPORTED_COMMAND

    - label: "Read current Operational State"
      command: "readAttribute"
      attribute: "OperationalState"
      response:
          value: 0

    - label: "Pause Command"
      command: "Pause"
      response:
          values:
              - name: "CommandResponseState"
                value: { ErrorStateID: 3 }

    - label: "Read current Operational State"
      command: "readAttribute"
      attribute: "OperationalState"
      response:
          value: 0

    - label: "Resume Command"
      command: "Resume"
      response:
          values:
              - name: "CommandResponseState"
                value: { ErrorStateID: 3 }

    - label: "Read current Operational State"
      command: "readAttribute"
      attribute: "OperationalState"
      response:
          value: 0

    - label: "Stop Command"
      command: "Stop"
      response:
          error: UNSUPPORTED_COMMAND

    - label: "Read current Operational State"
      command: "readAttribute"
      attribute: "OperationalState"
      response:
          value: 0
